{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Alan/Desktop/Mission Ready/Proyects/Mission 2/mission2/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _createForOfIteratorHelper from\"C:/Users/Alan/Desktop/Mission Ready/Proyects/Mission 2/mission2/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"C:/Users/Alan/Desktop/Mission Ready/Proyects/Mission 2/mission2/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Alan/Desktop/Mission Ready/Proyects/Mission 2/mission2/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import axios from\"axios\";import carsData from\"./cars.json\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ImageUploader=function ImageUploader(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedImage=_useState2[0],setSelectedImage=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),similarCar=_useState4[0],setSimilarCar=_useState4[1];var handleImageChange=function handleImageChange(event){// Updates the selectedImage state with the image file.\nsetSelectedImage(event.target.files[0]);};var handleImageUpload=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var formData,response,aiPredictions,targetTags,similarCars,_loop,i;return _regeneratorRuntime().wrap(function _callee$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(selectedImage){_context2.next=4;break;}console.log(\"No image selected.\");return _context2.abrupt(\"return\");case 4:formData=new FormData();formData.append(\"image\",selectedImage);//Creates object and add image\n_context2.next=8;return axios.post(// Send post request with image\n\"http://localhost:5000/api/upload\",formData);case 8:response=_context2.sent;console.log(\"API Response:\",response.data);aiPredictions=response.data.response.predictions;targetTags=aiPredictions.map(function(prediction){return prediction.tagName.toLowerCase();});similarCars=[];// Empty array to hold list of cars\n// Find the first similar car based on the top prediction\n_loop=/*#__PURE__*/_regeneratorRuntime().mark(function _loop(i){var filteredCars,_iterator,_step,car;return _regeneratorRuntime().wrap(function _loop$(_context){while(1)switch(_context.prev=_context.next){case 0:filteredCars=carsData.carsList.filter(function(car){return car.model.toLowerCase()===targetTags[i];});//Filter json\nif(filteredCars.length>0&&similarCars.length<3){_iterator=_createForOfIteratorHelper(filteredCars);try{for(_iterator.s();!(_step=_iterator.n()).done;){car=_step.value;similarCars.push(car);}}catch(err){_iterator.e(err);}finally{_iterator.f();}}case 2:case\"end\":return _context.stop();}},_loop);});i=0;case 15:if(!(i<Math.min(3,targetTags.length))){_context2.next=20;break;}return _context2.delegateYield(_loop(i),\"t0\",17);case 17:i++;_context2.next=15;break;case 20:console.log(\"Found Similar Car:\",similarCars);// Updates state with the similars car\nsetSimilarCar(similarCars);_context2.next=27;break;case 24:_context2.prev=24;_context2.t1=_context2[\"catch\"](0);console.error(\"Error:\",_context2.t1);case 27:case\"end\":return _context2.stop();}},_callee,null,[[0,24]]);}));return function handleImageUpload(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Upload Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleImageUpload,children:\"Upload\"}),similarCar&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Similar Cars\"}),similarCar.map(function(car,index){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[car.brand,\" \",car.model]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Year:\"}),\" \",car.year]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Color:\"}),\" \",car.color]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Type:\"}),\" \",car.type]}),/*#__PURE__*/_jsx(\"img\",{src:car.imageURL,alt:\"\".concat(car.brand,\" \").concat(car.model)})]},index);})]})]});};export default ImageUploader;","map":{"version":3,"names":["React","useState","axios","carsData","jsx","_jsx","jsxs","_jsxs","ImageUploader","_useState","_useState2","_slicedToArray","selectedImage","setSelectedImage","_useState3","_useState4","similarCar","setSimilarCar","handleImageChange","event","target","files","handleImageUpload","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","formData","response","aiPredictions","targetTags","similarCars","_loop","i","wrap","_callee$","_context2","prev","next","console","log","abrupt","FormData","append","post","sent","data","predictions","map","prediction","tagName","toLowerCase","filteredCars","_iterator","_step","car","_loop$","_context","carsList","filter","model","length","_createForOfIteratorHelper","s","n","done","value","push","err","e","f","stop","Math","min","delegateYield","t1","error","apply","arguments","children","type","accept","onChange","onClick","index","brand","year","color","src","imageURL","alt","concat"],"sources":["C:/Users/Alan/Desktop/Mission Ready/Proyects/Mission 2/mission2/frontend/src/components/ImageUploader.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport carsData from \"./cars.json\";\r\n\r\nconst ImageUploader = () => {\r\n  const [selectedImage, setSelectedImage] = useState(null);\r\n  const [similarCar, setSimilarCar] = useState(null);\r\n\r\n  const handleImageChange = (event) => {\r\n    // Updates the selectedImage state with the image file.\r\n    setSelectedImage(event.target.files[0]);\r\n  };\r\n\r\n  const handleImageUpload = async () => {\r\n    //Checks if image was selected, if not, console no image selected\r\n    try {\r\n      if (!selectedImage) {\r\n        console.log(\"No image selected.\");\r\n        return;\r\n      }\r\n\r\n      const formData = new FormData();\r\n      formData.append(\"image\", selectedImage); //Creates object and add image\r\n\r\n      const response = await axios.post(\r\n        // Send post request with image\r\n\r\n        \"http://localhost:5000/api/upload\",\r\n        formData\r\n      );\r\n\r\n      console.log(\"API Response:\", response.data);\r\n\r\n      const aiPredictions = response.data.response.predictions;\r\n      const targetTags = aiPredictions.map((prediction) =>\r\n        prediction.tagName.toLowerCase()\r\n      );\r\n\r\n      let similarCars = []; // Empty array to hold list of cars\r\n      // Find the first similar car based on the top prediction\r\n      for (let i = 0; i < Math.min(3, targetTags.length); i++) {\r\n        const filteredCars = carsData.carsList.filter(\r\n          (car) => car.model.toLowerCase() === targetTags[i]\r\n        ); //Filter json\r\n\r\n        if (filteredCars.length > 0 && similarCars.length < 3) {\r\n          for (const car of filteredCars) {\r\n            similarCars.push(car);\r\n          }\r\n        }\r\n      }\r\n\r\n      console.log(\"Found Similar Car:\", similarCars);\r\n\r\n      // Updates state with the similars car\r\n      setSimilarCar(similarCars);\r\n    } catch (error) {\r\n      console.error(\"Error:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Upload Image</h2>\r\n      <input type=\"file\" accept=\"image/*\" onChange={handleImageChange} />\r\n      <button onClick={handleImageUpload}>Upload</button>\r\n\r\n      {similarCar && (\r\n        <div>\r\n          <h2>Similar Cars</h2>\r\n          {similarCar.map((car, index) => (\r\n            <div key={index}>\r\n              <h3>\r\n                {car.brand} {car.model}\r\n              </h3>\r\n              <p>\r\n                <b>Year:</b> {car.year}\r\n              </p>\r\n              <p>\r\n                <b>Color:</b> {car.color}\r\n              </p>\r\n              <p>\r\n                <b>Type:</b> {car.type}\r\n              </p>\r\n              <img src={car.imageURL} alt={`${car.brand} ${car.model}`} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUploader;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}